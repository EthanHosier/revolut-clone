import { ExpoRequest, ExpoResponse } from "expo-router/server";

const API_KEY = process.env.CRYPTO_API_KEY;

export async function GET(request: ExpoRequest) {
  // const limit = request.expoUrl.searchParams.get("limit") || 5;

  // const response = await fetch(
  //   `https://pro-api.coinmarketcap.com/v1/cryptocurrency/listings/latest?start=1&limit=${limit}&convert=GBP`,
  //   {
  //     headers: {
  //       "X-CMC_PRO_API_KEY": API_KEY!,
  //     },
  //   }
  // );

  // const res = await response.json();
  return ExpoResponse.json(data);
}

const data = [
  {
    id: 1,
    name: "Bitcoin",
    symbol: "BTC",
    slug: "bitcoin",
    num_market_pairs: 10944,
    date_added: "2010-07-13T00:00:00.000Z",
    tags: [
      "mineable",
      "pow",
      "sha-256",
      "store-of-value",
      "state-channel",
      "coinbase-ventures-portfolio",
      "three-arrows-capital-portfolio",
      "polychain-capital-portfolio",
      "binance-labs-portfolio",
      "blockchain-capital-portfolio",
      "boostvc-portfolio",
      "cms-holdings-portfolio",
      "dcg-portfolio",
      "dragonfly-capital-portfolio",
      "electric-capital-portfolio",
      "fabric-ventures-portfolio",
      "framework-ventures-portfolio",
      "galaxy-digital-portfolio",
      "huobi-capital-portfolio",
      "alameda-research-portfolio",
      "a16z-portfolio",
      "1confirmation-portfolio",
      "winklevoss-capital-portfolio",
      "usv-portfolio",
      "placeholder-ventures-portfolio",
      "pantera-capital-portfolio",
      "multicoin-capital-portfolio",
      "paradigm-portfolio",
      "bitcoin-ecosystem",
      "ftx-bankruptcy-estate",
    ],
    max_supply: 21000000,
    circulating_supply: 19668856,
    total_supply: 19668856,
    infinite_supply: false,
    platform: null,
    cmc_rank: 1,
    self_reported_circulating_supply: null,
    self_reported_market_cap: null,
    tvl_ratio: null,
    last_updated: "2024-03-31T00:05:00.000Z",
    quote: {
      GBP: {
        price: 55175.81450118066,
        volume_24h: 13541324607.037098,
        volume_change_24h: -32.1112,
        percent_change_1h: -0.17417177,
        percent_change_24h: -0.29788182,
        percent_change_7d: 8.53735441,
        percent_change_30d: 13.89291689,
        percent_change_60d: 61.98021181,
        percent_change_90d: 64.36420564,
        market_cap: 1085245150106.4344,
        market_cap_dominance: 52.0868,
        fully_diluted_market_cap: 1158692104524.7913,
        tvl: null,
        last_updated: "2024-03-31T00:04:01.000Z",
      },
    },
  },
  {
    id: 1027,
    name: "Ethereum",
    symbol: "ETH",
    slug: "ethereum",
    num_market_pairs: 8681,
    date_added: "2015-08-07T00:00:00.000Z",
    tags: [
      "pos",
      "smart-contracts",
      "ethereum-ecosystem",
      "coinbase-ventures-portfolio",
      "three-arrows-capital-portfolio",
      "polychain-capital-portfolio",
      "binance-labs-portfolio",
      "blockchain-capital-portfolio",
      "boostvc-portfolio",
      "cms-holdings-portfolio",
      "dcg-portfolio",
      "dragonfly-capital-portfolio",
      "electric-capital-portfolio",
      "fabric-ventures-portfolio",
      "framework-ventures-portfolio",
      "hashkey-capital-portfolio",
      "kenetic-capital-portfolio",
      "huobi-capital-portfolio",
      "alameda-research-portfolio",
      "a16z-portfolio",
      "1confirmation-portfolio",
      "winklevoss-capital-portfolio",
      "usv-portfolio",
      "placeholder-ventures-portfolio",
      "pantera-capital-portfolio",
      "multicoin-capital-portfolio",
      "paradigm-portfolio",
      "injective-ecosystem",
      "layer-1",
      "ftx-bankruptcy-estate",
    ],
    max_supply: null,
    circulating_supply: 120070534.90423737,
    total_supply: 120070534.90423737,
    infinite_supply: true,
    platform: null,
    cmc_rank: 2,
    self_reported_circulating_supply: null,
    self_reported_market_cap: null,
    tvl_ratio: null,
    last_updated: "2024-03-31T00:04:00.000Z",
    quote: {
      GBP: {
        price: 2777.951647949791,
        volume_24h: 7397560250.812043,
        volume_change_24h: -26.3937,
        percent_change_1h: -0.07858637,
        percent_change_24h: -0.03240493,
        percent_change_7d: 5.15190445,
        percent_change_30d: 4.9501233,
        percent_change_60d: 49.43301791,
        percent_change_90d: 53.47165343,
        market_cap: 333550140307.43915,
        market_cap_dominance: 16.0093,
        fully_diluted_market_cap: 333550140307.4372,
        tvl: null,
        last_updated: "2024-03-31T00:04:01.000Z",
      },
    },
  },
  {
    id: 825,
    name: "Tether USDt",
    symbol: "USDT",
    slug: "tether",
    num_market_pairs: 80694,
    date_added: "2015-02-25T00:00:00.000Z",
    tags: [
      "payments",
      "stablecoin",
      "asset-backed-stablecoin",
      "avalanche-ecosystem",
      "solana-ecosystem",
      "arbitrum-ecosytem",
      "moonriver-ecosystem",
      "injective-ecosystem",
      "bnb-chain",
      "usd-stablecoin",
      "optimism-ecosystem",
    ],
    max_supply: null,
    circulating_supply: 104505348425.46068,
    total_supply: 107792615136.84193,
    platform: {
      id: 1027,
      name: "Ethereum",
      symbol: "ETH",
      slug: "ethereum",
      token_address: "0xdac17f958d2ee523a2206206994597c13d831ec7",
    },
    infinite_supply: true,
    cmc_rank: 3,
    self_reported_circulating_supply: null,
    self_reported_market_cap: null,
    tvl_ratio: null,
    last_updated: "2024-03-31T00:04:00.000Z",
    quote: {
      GBP: {
        price: 0.7924452234930706,
        volume_24h: 36966448142.66756,
        volume_change_24h: -23.8178,
        percent_change_1h: 0.0075983,
        percent_change_24h: -0.01260329,
        percent_change_7d: 0.02834512,
        percent_change_30d: -0.00046369,
        percent_change_60d: 0.0452863,
        percent_change_90d: 0.06067513,
        market_cap: 82814764189.2354,
        market_cap_dominance: 3.9748,
        fully_diluted_market_cap: 85419742993.01646,
        tvl: null,
        last_updated: "2024-03-31T00:04:01.000Z",
      },
    },
  },
  {
    id: 1839,
    name: "BNB",
    symbol: "BNB",
    slug: "bnb",
    num_market_pairs: 2127,
    date_added: "2017-07-25T00:00:00.000Z",
    tags: [
      "marketplace",
      "centralized-exchange",
      "payments",
      "smart-contracts",
      "alameda-research-portfolio",
      "multicoin-capital-portfolio",
      "bnb-chain",
      "layer-1",
      "sec-security-token",
      "alleged-sec-securities",
      "celsius-bankruptcy-estate",
    ],
    max_supply: null,
    circulating_supply: 149536048.466071,
    total_supply: 149536048.466071,
    infinite_supply: false,
    platform: null,
    cmc_rank: 4,
    self_reported_circulating_supply: null,
    self_reported_market_cap: null,
    tvl_ratio: null,
    last_updated: "2024-03-31T00:04:00.000Z",
    quote: {
      GBP: {
        price: 476.16585872793945,
        volume_24h: 1371391981.910948,
        volume_change_24h: -37.9674,
        percent_change_1h: -0.53136336,
        percent_change_24h: -1.58009158,
        percent_change_7d: 8.6758293,
        percent_change_30d: 50.41264347,
        percent_change_60d: 95.28279092,
        percent_change_90d: 92.13809589,
        market_cap: 71203960928.62947,
        market_cap_dominance: 3.4175,
        fully_diluted_market_cap: 71203960928.63037,
        tvl: null,
        last_updated: "2024-03-31T00:04:01.000Z",
      },
    },
  },
  {
    id: 5426,
    name: "Solana",
    symbol: "SOL",
    slug: "solana",
    num_market_pairs: 649,
    date_added: "2020-04-10T00:00:00.000Z",
    tags: [
      "pos",
      "platform",
      "solana-ecosystem",
      "cms-holdings-portfolio",
      "kenetic-capital-portfolio",
      "alameda-research-portfolio",
      "multicoin-capital-portfolio",
      "okx-ventures-portfolio",
      "layer-1",
      "ftx-bankruptcy-estate",
      "sec-security-token",
      "alleged-sec-securities",
      "cmc-crypto-awards-2024",
    ],
    max_supply: null,
    circulating_supply: 444405048.02572834,
    total_supply: 572890872.2111093,
    infinite_supply: true,
    platform: null,
    cmc_rank: 5,
    self_reported_circulating_supply: null,
    self_reported_market_cap: null,
    tvl_ratio: null,
    last_updated: "2024-03-31T00:04:00.000Z",
    quote: {
      GBP: {
        price: 154.02276715236763,
        volume_24h: 2354575618.6512485,
        volume_change_24h: -1.7276,
        percent_change_1h: -0.69839299,
        percent_change_24h: 1.63738082,
        percent_change_7d: 12.01390197,
        percent_change_30d: 54.19510553,
        percent_change_60d: 91.33689668,
        percent_change_90d: 90.45041743,
        market_cap: 68448495233.40351,
        market_cap_dominance: 3.2853,
        fully_diluted_market_cap: 88238237414.28522,
        tvl: null,
        last_updated: "2024-03-31T00:04:01.000Z",
      },
    },
  },
];
